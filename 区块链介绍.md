# 1、什么是区块链网络？

区块链网络是一种技术基础设施，为应用程序提供分类账和智能合约（打包为“链码”的一部分）服务。

**智能合约**主要用于生成交易，这些交易随后会被分发到网络中的每个对等节点，并在它们的账本副本中被永久记录。应用程序的用户可以是使用客户端应用程序的最终用户，也可以是区块链网络管理员。

在大多数情况下，多个组织共同组成一个通道，在该通道上通过链码进行交易，权限由最初配置通道时商定的一系列政策决定。此外，经各组织同意，政策可随时间推移而改变。

"网络 "和 "通道"，在 Hyperledger Fabric 中，这些术语实际上是同义词，因为它们都是指在一个定义的结构中管理组织间交互的组织、组件、政策和流程的统称。

# 2、一个区块链网络样例

区块链网络最终目标，如下为区块链网络样例的最终状态。

![network.1](https://github.com/hyperledger/fabric/raw/main/docs/source/network/network.diagram.1.png)

**组织**：R1、R2、R0。为网络贡献基础设施，帮助组建网络

这些基础设施实现了区块链网络，并受组成网络的各组织商定的政策管理。例如，谁可以添加新的组织。

三个组织 R1、R2 和 R0 共同决定建立一个网络。该网络有一个所有组织都同意的**配置** CC1，其中列出了各组织的定义以及定义各组织在通道上扮演的角色的策略。

在这个通道上，R1 和 R2 将把名为 P1 和 P2 的**对等节点**加入**通道** C1，而 R0 则拥有通道的**订购服务** O。所有这些节点都将包含该通道的**分类账副本**（L1），该分类账是记录交易的地方。

请注意，订购服务保存的分类账副本不包含状态数据库。

R1 和 R2 还将通过它们拥有的**应用程序** A1 和 A2 与通道进行交互。**这三个组织都有一个证书颁发机构**，为其组织的节点、管理员、组织定义和应用程序生成必要的证书。

# 3、创建网络

创建网络或通道的第一步是**同意并确定其配置**：

![network.2](https://github.com/hyperledger/fabric/raw/main/docs/source/network/network.diagram.2.png)

通道配置 CC1 已得到 R1、R2 和 R0 组织的同意，并包含在一个称为 "**配置块** "的块中，通常由 `configtxgen` 工具根据 `configtx.yaml` 文件创建。

一个组织可以单方面创建一个频道，然后邀请其他组织加入（我们将在 "添加一个组织到现有频道 "一文中探讨），但现在我们假设这些组织从一开始就希望在频道上合作。

一旦有了配置块，就可以说通道在逻辑上已经存在，即使没有任何组件与之物理连接。该配置块包含可加入组件并在通道上交互的组织记录，以及定义如何做出决策和达成特定结果的结构的策略。虽然对等设备和应用程序是网络中的关键角色，但它们在通道中的行为更多是由通道配置策略决定的。

这些组织的定义及其管理员的身份必须由与每个组织相关的证书颁发机构（CA）创建。在我们的示例中，组织 R1、R2 和 R0 的证书和组织定义分别由 CA1、CA2 和 CA0 创建。创建 CA 后，请查看注册和注册 CA 身份，了解如何定义组织以及为管理员和节点创建身份。

# 4、证书颁发机构（CA）

证书颁发机构在网络中发挥着关键作用，因为它们颁发的 X.509 证书可用来**识别属于某个组织的组件**。CA 颁发的证书还可用于**签署交易**，以**表明某个组织认可交易结果**--这是交易结果被账本接受的先决条件。让我们来详细了解一下 CA 的这两个方面。

首先，区块链网络的不同组件使用证书相互识别自己来自特定组织。这就是为什么支持区块链网络的 CA 通常不止一个 -- 不同的组织通常使用不同的 CA。我们将在通道中使用三个 CA；每个组织一个。

证书与成员组织的映射是通过一种称为 "**成员服务提供商（MSP）**"的结构来实现的，该结构通过创建一个与根 CA 证书绑定的 MSP 来定义一个组织，以识别由根 CA 创建的组件和身份。然后，通道配置可以通过策略为组织分配特定的权利和权限（赋予特定组织（如 R1）向通道添加新组织的权利）。

其次，我们稍后会看到 CA 签发的证书如何成为交易生成和验证流程的核心。具体来说，X.509 证书用于客户端应用程序交易提出和智能合约交易响应，以对交易进行数字签名。随后，托管分类账副本的网络节点在接受分类账上的交易之前，会验证交易签名是否有效。

# 5、将节点加入通道

对等方是网络的基本要素，因为它们承载着分类账和链码（包含智能合约），因此是在通道上进行交易的组织连接到通道的物理点之一（另一个物理点是应用程序）。一个对等方可隶属于一个组织认为合适的多个渠道（取决于对等方 pod 的处理限制和特定国家的数据驻留规则等因素）。

另一方面，排序服务会从应用程序中收集已认可的交易，并将其排序为**交易块**，随后分发到通道中的每个对等节点。在每个提交的对等节点上，交易都会被记录下来，分类账的本地副本也会得到适当更新。**订购服务**是特定通道所独有的，为该通道提供服务的节点也被称为 "同意者集"。即使一个节点（或一组节点）为多个通道提供服务，每个通道的订购服务也被视为订购服务的一个独立实例。

由于 R1、R2 和 R0 已列入通道配置，因此它们可以加入对等体（R1 和 R2）或订购节点（R0）到通道。

![network.3](https://github.com/hyperledger/fabric/raw/main/docs/source/network/network.diagram.3.png)











































